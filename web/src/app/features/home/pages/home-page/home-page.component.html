<div class="max-w-screen-xl mx-auto px-4 md:px-8 py-20">
  <h2 class="text-2xl font-semibold mb-3">Início:</h2>
    <div class="flex flex-col md:flex-row items-center gap-3 mb-3">
      @if (this.permissions()?.read_files) {
        <app-lot-filters 
          class="w-full md:flex-1"
          [userRole]="this.userRole()!"
          (submitForm)="onFilterSubmit($event)"
        ></app-lot-filters>
      }@else {
        <div class="hidden md:block md:flex-1"></div>
      }

      @if (this.permissions()?.upload_files) {
        <button matButton="filled" class="w-full md:w-auto" id="create-lote-btn" (click)="openCreateLotDialog()">
          <mat-icon>add</mat-icon>
          Novo lote
        </button>
      }
    </div>
    @switch (this.viewState()) {
      @case ('loading') {
        <div class="flex justify-center items-center p-16">
          <mat-spinner diameter="50"></mat-spinner>
        </div>
      }
      @case ('error') {
        <app-ui-error [message]="error()" />
      }
      @default {
        @if (this.permissions()?.read_files) {
          <app-lot-list
            id="lotList"
            [lots]="this.lots()"
            [isLoading]="this.isLoading()"
            [totalElements]="this.totalElements()"
            [pageSize]="this.pagination().pageSize"
            [pageIndex]="this.pagination().pageIndex"
            (pageChange)="this.onPageChange($event)"
            (onClickedLot)="onOpenLotDetails($event)"
          >
          </app-lot-list>
        }@else {
          <app-ui-not-found
            title="Você não tem permissão para visualizar os lotes criados"
          ></app-ui-not-found>
        }
      }
    }
</div>
