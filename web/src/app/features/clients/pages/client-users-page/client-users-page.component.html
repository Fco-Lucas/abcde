<div class="max-w-screen-xl mx-auto px-4 md:px-8 py-20">

  @switch (viewState()) {
    @case('loading') {
      <div class="flex justify-center items-center p-16">
        <mat-spinner diameter="50"></mat-spinner>
      </div>
    }
    @case ('error') {
      <app-ui-error [message]="error()" />
    }
    @default {
      <ng-container *ngIf="client() as client">
        <h2 class="text-2xl font-semibold mb-1">Usuários:</h2>
        <h3 class="text-1xl mb-3">Cliente: {{ client.name }}</h3>

        <div class="flex flex-col md:flex-row items-center gap-3 mb-3">
          <app-client-users-filters 
            class="w-full md:flex-1"
            (submitForm)="onFilterSubmit($event)"
            [permissions]="permissions()"
          ></app-client-users-filters>

          <button matButton="filled" class="w-full md:w-auto" (click)="openCreateClientUserDialog(null)">
            <mat-icon>add</mat-icon>
            Novo Usuário
          </button>
        </div>

        <mat-card>
          <mat-card-content>
              <app-client-users-list
                [clientUsers]="clientUsers()"
                [isLoading]="isLoading()"
                [totalElements]="totalElements()"
                [pageSize]="pagination().pageSize"
                [pageIndex]="pagination().pageIndex"
                (pageChange)="onPageChange($event)"
                (updateClientUser)="openUpdateClientUserDialog($event)"
                (deleteClientUser)="deleteClientUser($event)"
                (restorePassword)="restorePassword($event)"
              >
              </app-client-users-list>
          </mat-card-content>
        </mat-card>
      </ng-container>
    }
  }

</div>